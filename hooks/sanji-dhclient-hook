#!/bin/bash

#
# NOTE: DO NOT modify this file, or the MIRF may not work normally!!!
#

declare -x TERM="xterm"

# include basic sanji functions
# TODO: change to correct path
UPDATER=/usr/lib/sanji-1.0/ethernet/tools/dhclient-updater.py


# update data of ethernet model
#echo "${interface}, ${new_ip_address}, ${new_subnet_mask},
#	${new_domain_name}, ${new_domain_search}, ${new_domain_name_servers},
#	${new_routers}"
dns_array=(${new_domain_name_servers})
firstDns=${dns_array[0]}
secondDns=${dns_array[1]}
thirdDns=${dns_array[2]}
new_subnet=`ipcalc -b ${new_ip_address}/${new_subnet_mask} | awk '/Network/{print $2}' | cut -d '/' -f 1`

python "${UPDATER}" -i "${interface}" \
	--ip "${new_ip_address}" \
	--netmask "${new_subnet_mask}" \
	--subnet "${new_subnet}" \
	--gateway "${new_routers}" \
	--dns "${new_domain_name_servers}"

# prevent to modify default route and DNS automatically
unset new_routers

make_resolv_conf()
{
	:
}
